<!DOCTYPE html>
<html lang="fr">
  <head>
    <title>Printer UI</title>
    <meta charset="utf-8" />
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script src="http://code.jquery.com/jquery-1.9.0.min.js"></script>
    <style>body {font-family: sans-serif;}</style>
 </head>
 
<!-- <body onload="setTimeout('GetStatus();', 5000)">-->
<body>
    
<table border = 1>
<tr>
<td><input id="command1-button" type="button" value="Cancel"/></td>    
<td rowspan="5">
<pre id="command-output">
</pre>
</td>
</tr>

<tr>
<td><input id="command2-button" type="button" value="Pause"/></td>
</tr>

<tr>
<td><input id="command3-button" type="button" value="Resume"/></td>
</tr>

<tr>
<td><input id="command4-button" type="button" value="Reset"/></td>
</tr>

<tr>
<td><input id="command5-button" type="button" value="Get Status"/></td>
</tr>
</table>    
      
    <script>
      $("#command1-button").click(function() {
        var src = new EventSource('/command?cmd=Cancel');
      });

      $("#command2-button").click(function() {
        var src = new EventSource('/command?cmd=Pause');
      });

      $("#command3-button").click(function() {
        var src = new EventSource('/command?cmd=Resume');
      });

      $("#command4-button").click(function() {
        var src = new EventSource('/command?cmd=Reset');
      });

      $("#command5-button").click(function() {
        GetStatus();
      });
      
    function GetStatus()
    {
        var src = new EventSource('/command?cmd=GetStatus');
        $('#command-output').text("");
        src.onmessage = function(e) {
          console.log(e);
          $('#command-output').append("\n" + e.data);
          if ( e.data === '}' ) src.close();
        };
    };

    </script>
  </body>
</html>
